<!DOCTYPE html>
<html lang="en">

  <head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Eric Fuerstenberg">
    <meta name="description" content="Eric Fuerstenberg&#39;s personal website">
    <meta name="keywords" content="blog,developer,personal,cloud">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hosting a high performance static site with S3, Route53, &amp; SSL via CloudFront"/>
<meta name="twitter:description" content="Update: Hugo I recently reconfigured my static website (still hosted at cloud.hierux.com) into a more feature rich site using Hugo - you&rsquo;re looking at it right now! This allows me to make use of style templates and other feature enhancements while keeping things simple with markdown.
You can find the Hugo-ified version of my website in my Github repo.
I&rsquo;ve hosted static sites using a number of different strategies in the past."/>

    <meta property="og:title" content="Hosting a high performance static site with S3, Route53, &amp; SSL via CloudFront" />
<meta property="og:description" content="Update: Hugo I recently reconfigured my static website (still hosted at cloud.hierux.com) into a more feature rich site using Hugo - you&rsquo;re looking at it right now! This allows me to make use of style templates and other feature enhancements while keeping things simple with markdown.
You can find the Hugo-ified version of my website in my Github repo.
I&rsquo;ve hosted static sites using a number of different strategies in the past." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hierux.cloud/posts/static-s3-ssl-cloudfront/" />
<meta property="article:published_time" content="2020-04-18T14:39:34-07:00" />
<meta property="article:modified_time" content="2020-04-18T14:39:34-07:00" />


    
      <base href="https://hierux.cloud/posts/static-s3-ssl-cloudfront/">
    
    <title>
  Hosting a high performance static site with S3, Route53, &amp; SSL via CloudFront · eric fuerstenberg
</title>

    
      <link rel="canonical" href="https://hierux.cloud/posts/static-s3-ssl-cloudfront/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://hierux.cloud/css/coder.css" media="screen">
    

    

    
      
        
        
        <link rel="stylesheet" href="https://hierux.cloud/css/coder-dark.css" media="screen">
      
    

    

    

    

    <link rel="icon" type="image/png" href="https://hierux.cloud/favicon.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://hierux.cloud/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.69.0" />
  </head>

  
  
    
  
  <body class="colorscheme-auto">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://hierux.cloud/">
      eric fuerstenberg
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://hierux.cloud/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://hierux.cloud/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://hierux.cloud/projects/">Projects</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://hierux.cloud/contact/">Contact me</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Hosting a high performance static site with S3, Route53, &amp; SSL via CloudFront</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2020-04-18T14:39:34-07:00'>
                April 18, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              3-minute read
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="https://hierux.cloud/tags/learning/">learning</a>
      <span class="separator">•</span>
    <a href="https://hierux.cloud/tags/aws/">aws</a>
      <span class="separator">•</span>
    <a href="https://hierux.cloud/tags/cloud/">cloud</a>
      <span class="separator">•</span>
    <a href="https://hierux.cloud/tags/s3/">s3</a>
      <span class="separator">•</span>
    <a href="https://hierux.cloud/tags/route53/">route53</a>
      <span class="separator">•</span>
    <a href="https://hierux.cloud/tags/cloudfront/">cloudfront</a></div>

        </div>
      </header>

      <div>
        
        <h2 id="update-hugo">Update: Hugo</h2>
<p>I recently reconfigured my static website (still hosted at <a href="http://cloud.hierux.com">cloud.hierux.com</a>) into a more feature rich site using <a href="https://gohugo.io/">Hugo</a> - you&rsquo;re looking at it right now! This allows me to make use of style templates and other feature enhancements while keeping things simple with markdown.</p>
<p>You can find the Hugo-ified version of my website in my <a href="https://github.com/ericfuerstenberg/hierux.cloud">Github repo.</a></p>
<p>I&rsquo;ve hosted static sites using a number of different strategies in the past. For example, I used to have a blog running in a dockerized nginx configuration on an ec2 instance. Other times I&rsquo;ve simply used httpd and a static index.html file living on an ec2 instance. However, all of these cases required some management of the underlying infrastructure via ssh and this meant that I&rsquo;d need to configure security groups, keep track of private keys, and maintain the underlying instances via regular updates. Nothing nightmare inducing, but they still required regular ssh checkups and tinkering to keep things running as expected.</p>
<h2 id="high-availability-high-performance-low-latency">High availability, high performance, low latency</h2>
<p>Cue <strong>static hosting with AWS S3</strong> - a serverless solution to hosting static websites. Simply create a couple S3 buckets, enable static hosting, and upload your content. Then configure DNS for your domain names, add SSL encryption via Amazon Certificate Manger &amp; CloudFront, and you&rsquo;ve got a simple site up and running.</p>
<p>By using a combination of S3, CloudFront, and Route53 you can set up a highly available static website with high performance and low latency.</p>
<h2 id="here-was-my-process">Here was my process..</h2>
<p><strong>S3</strong></p>
<ol>
<li>create two S3 buckets (one for hierux.cloud and another for <a href="http://www.hierux.cloud">www.hierux.cloud</a> that will handle redirects)</li>
<li>upload your public content (in my case, everything in my <code>public/</code> directory under my hugo project)
<ul>
<li><code>aws s3 cp public/ s3://hierux.cloud --recursive</code></li>
</ul>
</li>
<li>enable static website hosting on your main bucket &amp; enter your index and error documents
<ul>
<li>Make note of the bucket endpoint (e.g., <code>http://your-bucket-name.s3-website.your-region-here.amazonaws.com</code>) - you&rsquo;ll need this later when configuring your CloudFront origin.</li>
</ul>
</li>
<li>write a simple S3 bucket policy in JSON that allows full access to S3:GetObjects in your primary bucket (hierux.com)</li>
<li>you should now simply be able to access your hugo website by navigating to the bucket endpoint - I ran into some issues with the default <code>baseURL</code> set in my <code>config.toml</code> file. I changed it to reflect my S3 endpoint and repopulated the <code>public/</code> directories by relaunching my site locally before syncing my changes up to s3 again using <code>aws s3 sync public/ s3://hierux.cloud</code>. Once this was complete the site was loading as expected via S3.</li>
</ol>
<p><strong>route 53 for dns</strong></p>
<ul>
<li>CNAME pointing <a href="http://www.hierux.cloud">www.hierux.cloud</a> to hierux.cloud</li>
<li>Alias record pointing hierux.cloud to my cloudfront distribution endpoint (allows us to handle redirects)</li>
</ul>
<p><strong>SSL &amp; amazon certificate manager</strong></p>
<ul>
<li>set up a basic SSL certificate covering <a href="http://www.hierux.com">www.hierux.com</a> and hierux.com endpoints</li>
<li>since this is all native to AWS, Route53 takes care of the DNS validation for you during the ssl cert generation process (otherwise you would need to validate via email)</li>
</ul>
<p><strong>configure cloudfront distribution</strong>
- speed up load times (serve static content closer to our end users) and provide SSL encryption for added security using CloudFront</p>
<p>Before you sync with S3, make sure you run the raw server command to specify the baseURL</p>
<p>notes:
<code>aws s3 sync public/ s3://hierux.cloud --delete</code>
<code>hugo server -D --renderToDisk --baseURL=https://hierux.cloud --appendPort=false</code></p>

      </div>


      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "cloud-engineering" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
        
      </footer>
    </article>

    
  </section>

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>Never stop learning...</p>
      
      
        ©
        
          2019 -
        
        2020
         Eric Fuerstenberg 
      
      
         · 
        Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
        
      
    </section>
  </footer>

    </main>

    

    <script>
(function(f, a, t, h, o, m){
	a[h]=a[h]||function(){
		(a[h].q=a[h].q||[]).push(arguments)
	};
	o=f.createElement('script'),
	m=f.getElementsByTagName('script')[0];
	o.async=1; o.src=t; o.id='fathom-script';
	m.parentNode.insertBefore(o,m)
})(document, window, '//analytics.example.com/tracker.js', 'fathom');
fathom('set', 'siteId', 'ABCDE');
fathom('trackPageview');
</script>


  </body>

</html>
